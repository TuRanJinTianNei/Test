
# 项目脚本总览（test1-test7）

本文档介绍项目中所有测试脚本的功能、参数配置和应用场景。

---

## OFDM系统仿真脚本（test1-test5）

### test1.m - 传统OFDM基线

**功能**：传统OFDM系统完整仿真（AWGN信道）

**主要参数**：

- IFFT点数：512
- 有效子载波数：`carrier_count = 200`（正频率数据，负频率镜像，含DC共401个占用子载波）
- CP长度：按比例计算（`GI = PrefixRatio * N`）
- 加窗：升余弦窗（LTE风格）
- 信道：AWGN（加性白高斯噪声）

**特点**：

- 传统OFDM基线配置
- 频域采用共轭镜像映射（实值时域）
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）
- 生成13个Figure进行可视化分析

**应用场景**：OFDM系统基础性能评估

---

### test2.m - LTE风格OFDM（10 MHz思路）

**功能**：LTE风格OFDM系统仿真（AWGN信道）

**主要参数**：

- IFFT点数：2048
- 子载波映射：k映射（正频率252、负频率镜像，DC=0）
- CP长度：固定 `GI = 72`（短CP）
- 加窗：升余弦窗，`beta = 1/16`
- 符号间重叠：在CP内重叠相加
- 信道：AWGN

**特点**：

- LTE标准配置思路
- 仿真100个符号
- 侧重15 dB SNR单点分析与多图形展示
- 升余弦加窗并在CP内重叠相加

**应用场景**：LTE系统性能分析

---

### test3.m - 标准OFDM配置（加窗+重叠）

**功能**：标准OFDM系统仿真（AWGN信道，加窗+符号重叠）

**主要参数**：

- IFFT点数：1024
- 子载波间隔：15 kHz
- 采样率：15.36 MHz
- 有效子载波数：`carrier_count = 300`（正频率300、负频率镜像300、DC=1，共601个占用子载波）
- 保护子载波：423个
- CP长度：`GI = PrefixRatio * N = 1/4 * 1024 = 256`样本
- 加窗：升余弦窗，`beta = 1/16`
- 后缀：`GIP = beta*(N+GI)`，限制在CP内
- 符号间重叠：LTE风格重叠相加（重叠区域限制在CP内）
- 信道：AWGN

**特点**：

- 符号结构：`[CP(GI=256) | 主体(N=1024) | 后缀(GIP)]`
- 符号间在CP范围内重叠（当前符号的后缀与下一个符号的CP前GIP个样本重叠相加）
- 加窗可抑制符号边缘的陡峭跳变，减少带外辐射
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）

**应用场景**：需要低频谱泄露的应用场景，LTE标准方法

---

### test4.m - 标准OFDM配置（固定CP长度）

**功能**：标准OFDM系统仿真（AWGN信道，加窗+符号重叠，固定CP长度）

**主要参数**：

- IFFT点数：1024
- 子载波间隔：15 kHz
- 采样率：15.36 MHz
- 有效子载波数：`carrier_count = 300`（正频率300、负频率镜像300、DC=1，共601个占用子载波）
- 保护子载波：423个
- CP长度：固定 `GI = 72`样本（固定值，不同于test3.m的按比例计算）
- 加窗：升余弦窗，`beta = 1/16`
- 后缀：`GIP = beta*(N+GI)`，限制在CP内
- 符号间重叠：LTE风格重叠相加（重叠区域限制在CP内）
- 信道：AWGN

**特点**：

- 符号结构：`[CP(GI=72) | 主体(N=1024) | 后缀(GIP)]`
- 符号间在CP范围内重叠（当前符号的后缀与下一个符号的CP前GIP个样本重叠相加）
- 加窗可抑制符号边缘的陡峭跳变，减少带外辐射
- CP长度固定为72（较短），与test3.m的256形成对比
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）

**应用场景**：对比不同CP长度对性能的影响，固定CP长度的标准配置

---

### test5.m - OFDM + Jakes衰落信道

**功能**：OFDM系统完整仿真（集成Jakes衰落信道）

**主要参数**：

- IFFT点数：1024
- 有效子载波数：`carrier_count = 300`（正频率300、负频率镜像300、DC=1，共601个占用子载波）
- CP长度：固定 `GI = 72`样本
- 加窗：升余弦窗，`beta = 1/16`
- 信道：**Jakes衰落 + AWGN**

**Jakes信道参数**：

- 最大多普勒频移：`fd = 100 Hz`（对应约30 km/h @ 2.4 GHz）
- 散射路径数：`N0 = 34`（Jakes模型基础振荡器数量）
- 信道生成：调用 `jakesChannel.m`函数（基于 `comm.RayleighChannel`对象）
- 路径延迟：`[0, 0.5e-6, 1e-6]`秒（三径：0秒主径，0.5微秒，1微秒多径）
- 路径功率：`[0, -5, -10]`dB（主径0 dB，多径-5 dB和-10 dB）
- 时延扩展：~0.41微秒（频率选择性衰落）

**特点**：

- 完整的OFDM系统链路：发送端（**导频插入**）→ Jakes衰落 + AWGN → 接收端（**信道估计 + 均衡**）
- **导频辅助信道估计**：
  - 在频域插入导频符号（每隔6个子载波）
  - 基于导频位置的信道估计：$H_{est} = Y_{pilot} / X_{pilot}$
  - 对非导频位置进行插值估计（线性或样条插值）
- **频域均衡**：
  - 零迫均衡（Zero-Forcing）：$Y_{eq} = Y / H_{est}$
  - 有效抵消衰落信道的影响
- 生成14-15个Figure进行可视化分析：
  - OFDM系统性能（Figure 1-13）
  - 信道估计结果可视化（Figure 14，如果启用导频均衡）
  - 均衡后星座图（Figure 15，如果启用导频均衡）
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）

**应用场景**：移动通信系统性能评估，衰落信道下的OFDM系统分析

---

### singleSNR.m - LTE标准OFDM系统（严格标准）

**功能**：严格遵循LTE标准的OFDM系统完整仿真（AWGN信道）

**主要参数**：

- IFFT点数：2048（对应10MHz系统带宽）
- 子载波间隔：15 kHz（LTE基本间隔）
- 采样率：30.72 MHz（对应10MHz系统带宽）
- 有效子载波数：`carrier_count = 252`（正频率数据子载波，k=1到252）
- 负频率共轭：251个（k=-251到-1，自动共轭对称）
- 总有效子载波：503个（不含DC）
- 空子载波：97个（1个DC + 48个低频保护带 + 48个高频保护带）
- CP长度：**区分长CP和短CP**（LTE标准）
  - 长CP：160样本（时隙第1个符号）
  - 短CP：144样本（时隙第2~7个符号）
- 加窗：升余弦窗，区分长CP和短CP的过渡长度
  - 长CP符号过渡长度：40样本
  - 短CP符号过渡长度：36样本
- 符号间重叠：LTE风格重叠相加（重叠区域限制在CP内）
- 信道：AWGN
- 仿真符号数：10个符号（快速仿真模式）

**特点**：

- **严格遵循LTE标准参数**：10MHz带宽，15kHz子载波间隔，常规CP
- 符号结构：`[CP | 主体(N=2048) | 后缀(window_trans)]`
- 支持不同CP长度的符号混合（长CP和短CP）
- 频域采用共轭对称映射（使IFFT输出为实信号）
- 符号间在CP范围内重叠相加，实现平滑过渡
- **快速仿真模式**：仅仿真15dB SNR单点（不计算BER-SNR曲线）
- 生成13个Figure进行可视化分析：
  - 单符号分析与可视化（Figure 1-5）
  - 帧级、串行信号与频谱分析（Figure 6-8）
  - 信道影响与接收端评估（Figure 12-13）
  - 解调判决与性能（Figure 9-11）

**与test2.m的区别**：

- test2.m：LTE风格思路，固定CP=72，仿真100个符号，侧重15dB分析
- singleSNR.m：**严格LTE标准**，区分长CP/短CP，10个符号快速仿真，更符合LTE实际配置

**应用场景**：LTE标准系统性能分析，需要严格遵循LTE规范的场景

---

### test6.m - OFDM + 导频辅助信道估计与均衡

**功能**：OFDM系统完整仿真（含导频辅助信道估计与均衡，用于抵消衰落信道影响）

**主要参数**：

- IFFT点数：1024
- 有效子载波数：`carrier_count = 300`（正频率300、负频率镜像300、DC=1，共601个占用子载波）
- CP长度：固定 `GI = 72`样本
- 加窗：升余弦窗，`beta = 1/16`
- 信道：**Jakes衰落 + AWGN**
- **导频参数**：
  - 导频间隔：`pilot_spacing = 6`（每隔6个子载波插入一个导频）
  - 导频符号：`1 + j0`（已知复数值）
  - 导频数量：50个/符号
  - 数据子载波数：250个/符号
  - 插值方法：线性插值或样条插值

**Jakes信道参数**：

- 最大多普勒频移：`fd = 100 Hz`（对应约30 km/h @ 2.4 GHz）
- 散射路径数：`N0 = 34`（Jakes模型基础振荡器数量）
- 信道生成：调用 `jakesChannel.m`函数（基于 `comm.RayleighChannel`对象）
- 路径延迟：`[0, 0.5e-6, 1e-6]`秒（三径：0秒主径，0.5微秒，1微秒多径）
- 路径功率：`[0, -5, -10]`dB（主径0 dB，多径-5 dB和-10 dB）
- 时延扩展：~0.41微秒（频率选择性衰落）

**特点**：

- 完整的OFDM系统链路：发送端（**导频插入**）→ Jakes衰落 + AWGN → 接收端（**信道估计 + 均衡**）
- **导频辅助信道估计**：
  - 在频域插入导频符号
  - 基于导频位置的信道估计：$H_{est} = Y_{pilot} / X_{pilot}$
  - 对非导频位置进行插值估计
- **频域均衡**：
  - 零迫均衡（Zero-Forcing）：$Y_{eq} = Y / H_{est}$
  - 有效抵消衰落信道的影响
- 生成14-15个Figure进行可视化分析：
  - OFDM系统性能（Figure 1-13）
  - 信道估计结果可视化（Figure 14，如果启用导频均衡）
  - 均衡后星座图（Figure 15，如果启用导频均衡）
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）

**应用场景**：移动通信系统性能评估，需要信道估计和均衡的衰落信道场景

---

### OFDM_16QAM.m - 传统OFDM系统（test1的变体）

**功能**：传统OFDM系统完整仿真（AWGN信道，与test1.m功能类似）

**主要参数**：

- IFFT点数：512
- 有效子载波数：`carrier_count = 200`（正频率数据，负频率镜像，含DC共401个占用子载波）
- CP长度：按比例计算（`GI = PrefixRatio * N`）
- 加窗：升余弦窗（LTE风格）
- 信道：AWGN（加性白高斯噪声）

**特点**：

- 传统OFDM基线配置
- 频域采用共轭镜像映射（实值时域）
- 完整的BER-SNR曲线计算（10-30 dB，步进2 dB）
- 生成13个Figure进行可视化分析

**与test1.m的关系**：

- 功能与test1.m基本相同
- 可能是test1.m的早期版本或变体

**应用场景**：OFDM系统基础性能评估

---

## 信号处理基础脚本

### test7.m - 复包络信号仿真

**功能**：模拟带通复包络信号并展示

**主要参数**：

- 采样频率：`fs = 10,000 Hz`
- 信号持续时间：`T = 1秒`
- 载波频率：`fc = 1000 Hz`（带通中心频率）
- 基带信号频率：`f1 = 50 Hz`，`f2 = 100 Hz`

**信号模型**：

- 带通信号：`s(t) = Re{ṡ(t) * exp(j*2π*fc*t)}`
- 复包络：`ṡ(t) = A(t)*exp(j*φ(t)) = I(t) + j*Q(t)`
  - `A(t)`: 包络（幅度调制）
  - `φ(t)`: 相位（相位调制）
  - `I(t)`: 同相分量（实部）
  - `Q(t)`: 正交分量（虚部）

**特点**：

- 生成基带复包络信号（包含幅度和相位调制）
- 将复包络调制到带通频率
- 生成6个Figure展示：
  - Figure 1: 复包络的I/Q分量（实部/虚部）
  - Figure 2: 复包络的幅度和相位
  - Figure 3: 带通信号的时域波形
  - Figure 4: 复包络在复平面上的轨迹（星座图）
  - Figure 5: 带通信号的频谱
  - Figure 6: 复包络的频谱（基带）

**应用场景**：理解复包络信号的概念，学习带通信号的表示方法

---

## test3.m 与 test4.m 的主要区别

### 1. **循环前缀（CP）长度**（主要区别）

- **test3.m**: `GI = PrefixRatio * IFFT_bin_length = 1/4 * 1024 = 256` 样本
  - CP长度按比例计算（PrefixRatio = 1/4）
  - CP较长，抗多径能力更强
- **test4.m**: `GI = 72` 样本（固定值）
  - CP长度固定为72，PrefixRatio = 72/1024 ≈ 0.0703
  - CP较短，用于对比不同CP长度的影响

### 2. **加窗处理**（相同）

- **test3.m**:
  - 使用升余弦窗（LTE风格）
  - `beta = 1/16`（滚降系数）
  - 有后缀 `GIP = beta*(N+GI)`，限制在CP内
  - 符号结构：`[CP(GI=256) | 主体(N=1024) | 后缀(GIP)]`
- **test4.m**:
  - **同样使用升余弦窗**（LTE风格）
  - `beta = 1/16`（滚降系数）
  - 有后缀 `GIP = beta*(N+GI)`，限制在CP内
  - 符号结构：`[CP(GI=72) | 主体(N=1024) | 后缀(GIP)]`

### 3. **符号串接方式**（相同）

- **test3.m**:
  - LTE风格重叠相加
  - 符号间在CP范围内重叠（当前符号的后缀与下一个符号的CP前GIP个样本重叠相加）
  - 重叠区域限制在CP内，不影响有效数据
- **test4.m**:
  - **同样使用LTE风格重叠相加**
  - 符号间在CP范围内重叠（当前符号的后缀与下一个符号的CP前GIP个样本重叠相加）
  - 重叠区域限制在CP内，不影响有效数据

### 4. **频谱特性**（相同）

- **test3.m**:
  - 加窗可抑制符号边缘的陡峭跳变，减少带外辐射（频谱泄露）
  - 升余弦窗平滑边沿，降低频谱旁瓣
- **test4.m**:
  - **同样加窗处理**，抑制符号边缘的陡峭跳变
  - 升余弦窗平滑边沿，降低频谱旁瓣

### 5. **应用场景对比**

- **test3.m**:
  - 适用于需要低频谱泄露的应用场景
  - LTE标准方法，符号间平滑过渡
  - CP较长（256），抗多径能力更强，适合多径环境
- **test4.m**:
  - 适用于对比不同CP长度对性能的影响
  - 同样使用LTE标准方法，符号间平滑过渡
  - CP较短（72），可用于对比CP长度对系统性能的影响

### 6. **共同点**

- 两者均使用相同的IFFT点数（1024）
- 相同的子载波配置（carrier_count=300，占用含DC=601，保护=423）
- 相同的频域映射方式（共轭镜像映射）
- 相同的调制方式（16QAM）
- 相同的仿真符号数（100个符号）
- **相同的加窗配置**（beta=1/16，升余弦窗）
- **相同的重叠机制**（LTE风格重叠相加）
- 均包含完整的BER-SNR曲线计算（10-30 dB，步进2 dB）

### 7. **核心区别总结**

- **唯一的主要区别**：CP长度不同
  - test3.m: CP=256（按比例1/4，较长）
  - test4.m: CP=72（固定值，较短）
- **其他配置完全相同**：都有加窗、都有重叠、其他参数一致
- **对比目的**：主要用于研究CP长度对OFDM系统性能的影响

---

## 脚本对比总结

| 脚本       | IFFT | 子载波数 | CP长度  | 加窗 | 重叠 | 信道       | 主要特点              |
| ---------- | ---- | -------- | ------- | ---- | ---- | ---------- | --------------------- |
| test1      | 512  | 200      | 按比例  | ✓   | ✓   | AWGN       | 传统基线              |
| test2      | 2048 | 252      | 72固定  | ✓   | ✓   | AWGN       | LTE风格               |
| test3      | 1024 | 300      | 256     | ✓   | ✓   | AWGN       | 标准配置              |
| test4      | 1024 | 300      | 72固定  | ✓   | ✓   | AWGN       | 固定CP配置            |
| test5      | 1024 | 300      | 72固定  | ✓   | ✓   | Jakes+AWGN | 衰落信道              |
| test6      | 1024 | 300      | 72固定  | ✓   | ✓   | Jakes+AWGN | 导频均衡              |
| singleSNR  | 2048 | 252      | 长/短CP | ✓   | ✓   | AWGN       | LTE严格标准           |
| OFDM_16QAM | 512  | 200      | 按比例  | ✓   | ✓   | AWGN       | 传统基线（test1变体） |
| test7      | -    | -        | -       | -    | -    | -          | 复包络                |

---

## 使用建议

1. **学习OFDM基础**：从test1开始，了解传统OFDM系统
2. **对比不同配置**：使用test3和test4对比CP长度的影响（两者都有加窗和重叠）
3. **LTE系统分析**：
   - 使用test2进行LTE风格分析（固定CP，100个符号）
   - 使用singleSNR.m进行严格LTE标准分析（区分长/短CP，快速仿真）
4. **衰落信道分析**：
   - 使用test5分析移动通信场景（无均衡）
   - 使用test6分析带导频均衡的移动通信场景（有均衡）
5. **信号处理基础**：使用test7学习复包络概念

---

## 相关文档

- `README_test2.md` - test2详细说明
- `README_test3.md` - test3详细说明
- `README_test4.md` - test4详细说明
- `README_test5.md` - test5详细说明
- `README_test6.md` - test6详细说明（导频辅助信道估计与均衡）
- `README_test7.md` - test7详细说明（复包络数学原理）

---

## 补充说明

### test5.m 与 test6.m 的主要区别

两者都使用Jakes衰落信道，但test6.m增加了导频辅助的信道估计与均衡：

| 特性                 | test5.m          | test6.m                          |
| -------------------- | ---------------- | -------------------------------- |
| **信道**       | Jakes衰落 + AWGN | Jakes衰落 + AWGN（相同）         |
| **导频均衡**   | ❌ 无            | ✅**有（导频辅助）**       |
| **信道估计**   | ❌ 无            | ✅**基于导频的信道估计**   |
| **均衡方法**   | ❌ 无            | ✅**零迫均衡（ZF）**       |
| **导频开销**   | 0                | 50个导频/符号（约16.7%）         |
| **数据子载波** | 300个/符号       | 250个/符号（扣除导频）           |
| **BER性能**    | 受衰落影响较大   | **通过均衡改善性能**       |
| **应用场景**   | 衰落信道基础分析 | **需要均衡的衰落信道场景** |

**选择建议**：

- 需要分析衰落信道的基础影响：使用test5.m
- 需要评估均衡算法对性能的改善效果：使用test6.m
- 需要对比有无均衡的性能差异：同时运行test5.m和test6.m

---

### singleSNR.m 与 test2.m 的对比

两者都采用LTE风格配置，但有以下区别：

| 特性                  | test2.m               | singleSNR.m                        |
| --------------------- | --------------------- | ---------------------------------- |
| **标准符合度**  | LTE风格思路           | **严格LTE标准**              |
| **CP配置**      | 固定72样本（短CP）    | **区分长CP(160)和短CP(144)** |
| **子载波配置**  | 252个正频率数据子载波 | 252个正频率数据子载波（相同）      |
| **加窗过渡**    | 统一过渡长度          | **区分长/短CP的过渡长度**    |
| **仿真符号数**  | 100个符号             | 10个符号（快速仿真）               |
| **BER-SNR曲线** | 15dB单点分析          | 15dB单点分析（快速模式）           |
| **应用场景**    | LTE风格性能分析       | **严格LTE标准验证**          |

**选择建议**：

- 需要快速了解LTE风格OFDM：使用test2.m
- 需要严格遵循LTE标准参数：使用singleSNR.m
- 需要完整BER-SNR曲线：使用test1/test3/test4/test5/test6/test6
